<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <h:head>
        <title>Transaction management</title>
        <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
        <h:outputStylesheet library="css" name="dataTable.css"></h:outputStylesheet>
        <h:outputStylesheet library="css" name="jquery.dataTables.css"></h:outputStylesheet>
        <h:outputScript library="js" name="jquery.js"></h:outputScript>
        <h:outputScript library="js" name="jquery.dataTables.js"></h:outputScript>
        <h:outputScript library="js" name="jquery-ui-1.12.1.js"></h:outputScript>
        <h:outputScript library="js" name="altHighlight.js"></h:outputScript>       
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jszip-3.1.3/pdfmake-0.1.27/dt-1.10.15/af-2.2.0/b-1.4.0/b-colvis-1.4.0/b-flash-1.4.0/b-html5-1.4.0/b-print-1.4.0/cr-1.3.3/fc-3.2.2/fh-3.1.2/kt-2.3.0/r-2.1.1/rg-1.0.0/rr-1.2.0/sc-1.4.2/se-1.2.2/datatables.min.css"/>
    </h:head>
    <h:body>
        <ui:composition template="userMasterPage.xhtml">
            <ui:define name="content" >
                
                <h:form>
                    
                    <table>
                            <tr>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <label>First Name</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtFirstName" value="#{transactionManagedBean.customer.firstName}" 
                                                    required="true" requiredMessage="First name is a required field!">
                                                </h:inputText>
                                                <h:message for="txtFirstName" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Last Name</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtLastName" value="#{transactionManagedBean.customer.lastName}" 
                                                    required="true" requiredMessage="Last name is a required field!">
                                                </h:inputText>
                                                <h:message for="txtLastName" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Phone Number</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtPhone" value="#{transactionManagedBean.customer.phoneNumber}" 
                                                    required="true" requiredMessage="Phone number is a required field!" validatorMessage="Phone is an invalid format!">
                                                    <f:validateRegex pattern="^(?:\+?(61))? ?(?:\((?=.*\)))?(0?[2-57-8])\)? ?(\d\d(?:[- ](?=\d{3})|(?!\d\d[- ]?\d[- ]))\d\d[- ]?\d[- ]?\d{3})$" ></f:validateRegex>
                                                </h:inputText>
                                                <h:message for="txtPhone" class="alert-danger"></h:message> 
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>User type</label>
                                            </td>
                                            <td>
                                                <h:selectOneMenu id="cboType" class="form-control" value="#{transactionManagedBean.customer.type}">
                                                    <f:selectItems value="#{transactionManagedBean.allUserTypes}" var="type" />
                                                </h:selectOneMenu>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Email</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtEmail" value="#{transactionManagedBean.customer.email}" 
                                                        required="true" requiredMessage="Email is a required field!" validatorMessage="Email is an invalid format!">
                                                    <f:validateRegex pattern=".+\@.+\..+" ></f:validateRegex>
                                                </h:inputText>
                                                <h:message for="txtEmail" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td>
                                    <table>
                                        <tr>
                                            <td>
                                                <label>Street Number</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtStreetNumber" value="#{transactionManagedBean.addy.streetNumber}" 
                                                    required="true" requiredMessage="Street number is a required field!">
                                                </h:inputText>
                                                <h:message for="txtStreetNumber" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Street Name</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtStreetName" value="#{transactionManagedBean.addy.streetAddress}" 
                                                    required="true" requiredMessage="Street Address is a required field!">
                                                </h:inputText>
                                                <h:message for="txtStreetName" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Suburb</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtSuburb" value="#{transactionManagedBean.addy.suburb}" 
                                                    required="true" requiredMessage="Suburb is a required field!">
                                                </h:inputText>
                                                <h:message for="txtSuburb" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>Post Code</label>
                                            </td>
                                            <td>
                                                <h:inputText id="txtPost" value="#{transactionManagedBean.addy.postcode}" 
                                                    required="true" requiredMessage="Post code is a required field!">
                                                    <f:validateLength minimum="4" maximum="4" ></f:validateLength>
                                                    <f:validateRegex pattern="(\d{4})" ></f:validateRegex>
                                                </h:inputText>
                                                <h:message for="txtPost" class="alert-danger"></h:message>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label>State</label>
                                            </td>
                                            <td>
                                                <h:selectOneMenu id="cboStates" class="form-control" value="#{transactionManagedBean.addy.state}">
                                                    <f:selectItems value="#{transactionManagedBean.allStates}" var="state" />
                                                </h:selectOneMenu>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    
                    <h:commandButton id="cmdUpdate" value="Update" action="#{transactionManagedBean.updateProfile()}" ></h:commandButton>
                    <h:commandButton id="cmdReturn" value="Return" action="userTransaction" immediate="true" ></h:commandButton>
                    
                </h:form>
                
            </ui:define>
        </ui:composition>
    </h:body>
    
</html>
